//BEFORE INSERT: (copy paste)

CREATE DEFINER=`root`@`localhost` TRIGGER `ratemycoursedb`.`user_BEFORE_INSERT` BEFORE INSERT ON `user` FOR EACH ROW
BEGIN
	IF (LENGTH(NEW.name) < 3) THEN 
        SIGNAL SQLSTATE '45000' SET MESSAGE_TEXT = 'name_TOO_SHORT';
    END IF;
	IF (LENGTH(NEW.name) > 45) THEN 
        SIGNAL SQLSTATE '45000' SET MESSAGE_TEXT = 'name_TOO_LONG';
    END IF;

    IF (NEW.email NOT LIKE '%@KTH.se') THEN 
        SIGNAL SQLSTATE '45000' SET MESSAGE_TEXT = 'email_INVALID';
    END IF;
	IF (LENGTH(NEW.email) < 7) THEN 
        SIGNAL SQLSTATE '45000' SET MESSAGE_TEXT = 'email_TOO_SHORT';
    END IF;
	IF (LENGTH(NEW.password) < 6) THEN 
        SIGNAL SQLSTATE '45000' SET MESSAGE_TEXT = 'password_TOO_SHORT';
    END IF;
	IF (LENGTH(NEW.password) > 48) THEN 
        SIGNAL SQLSTATE '45000' SET MESSAGE_TEXT = 'password_TOO_LONG';
    END IF;
    IF NOT (NEW.name REGEXP '^[A-Za-z0-9]+$') THEN 
        SIGNAL SQLSTATE '45000' SET MESSAGE_TEXT = 'name_NONE_ALPHANUM';
    END IF;

END




//BEFORE UPDATE: (copy paste)
CREATE DEFINER=`root`@`localhost` TRIGGER `ratemycoursedb`.`user_BEFORE_UPDATE` BEFORE UPDATE ON `user` FOR EACH ROW
BEGIN
	IF (LENGTH(NEW.name) < 3) THEN 
        SIGNAL SQLSTATE '45000' SET MESSAGE_TEXT = 'name_TOO_SHORT';
    END IF;
	IF (LENGTH(NEW.name) > 45) THEN 
        SIGNAL SQLSTATE '45000' SET MESSAGE_TEXT = 'name_TOO_LONG';
    END IF;

    IF (NEW.email NOT LIKE '%@KTH.se') THEN 
        SIGNAL SQLSTATE '45000' SET MESSAGE_TEXT = 'email_INVALID';
    END IF;
	IF (LENGTH(NEW.email) < 7) THEN 
        SIGNAL SQLSTATE '45000' SET MESSAGE_TEXT = 'email_TOO_SHORT';
    END IF;
	IF (LENGTH(NEW.password) < 6) THEN 
        SIGNAL SQLSTATE '45000' SET MESSAGE_TEXT = 'password_TOO_SHORT';
    END IF;
	IF (LENGTH(NEW.password) > 48) THEN 
        SIGNAL SQLSTATE '45000' SET MESSAGE_TEXT = 'password_TOO_LONG';
    END IF;
    IF NOT (NEW.name REGEXP '^[A-Za-z0-9]+$') THEN 
        SIGNAL SQLSTATE '45000' SET MESSAGE_TEXT = 'name_NONE_ALPHANUM';
    END IF;

END